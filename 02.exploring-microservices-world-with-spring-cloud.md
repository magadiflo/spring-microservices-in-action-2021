# Explorando el mundo de los microservicios con Spring Cloud

---

`Spring Cloud` ofrece un conjunto de características **(service registration and discovery, circuit breakers,
monitoring, y otros)** que nos permitirán construir rápidamente arquitecturas de microservicios con configuraciones
mínimas.

## ¿Qué es Spring Cloud?

**Spring Cloud es una colección de herramientas** que engloba el trabajo de empresas de código abierto como VMware,
HashiCorp y Netflix en patrones de entrega. **Spring Cloud simplifica la instalación y configuración de nuestros
proyectos y proporciona soluciones a los patrones más comunes en nuestra aplicación Spring.**

La `Figura 2.1` asigna los patrones enumerados en el capítulo anterior a los proyectos de Spring Cloud que los
implementan.

![10.spring-cloud-microservices-pattern.png](./assets/10.spring-cloud-microservices-pattern.png)

## Spring Cloud Config

Spring Cloud Config maneja la gestión de los datos de configuración de la aplicación a través de un servicio
centralizado. Los datos de configuración de su aplicación (particularmente los datos de configuración específicos de su
entorno) se separan claramente del microservicio implementado. Esto garantiza que no importa cuántas instancias de
microservicio abra, siempre tendrán la misma configuración. Spring Cloud Config tiene su propio repositorio de
administración de propiedades pero también se integra con proyectos de código abierto como estos:

- `Git`: un sistema de control de versiones de código abierto que le permite administrar y realizar un seguimiento de
  los cambios en cualquier archivo de texto. Spring Cloud Config se integra con un repositorio backend de Git y lee los
  datos de configuración de la aplicación desde el repositorio.


- `Consul`: un descubrimiento de servicios de código abierto que permite que las instancias de servicio se registren en
  un servicio. Luego, los clientes del servicio pueden consultar a Consul para encontrar la ubicación de sus instancias
  de servicio. Consul también incluye una base de datos de almacenamiento de valores clave que Spring Cloud Config
  utiliza para almacenar datos de configuración de aplicaciones.


- `Eureka`: un proyecto de Netflix de código abierto que, como Consul, ofrece capacidades de descubrimiento de servicios
  similares. Eureka también tiene una base de datos clave-valor que se puede utilizar con Spring Cloud Config.

## Spring Cloud Service Discovery

Con `Spring Cloud Service Discovery`, puede abstraer la ubicación física (IP y/o nombre del servidor) de donde se
implementan sus servidores de los clientes que consumen el servicio. Los consumidores de servicios invocan la lógica
empresarial para los servidores a través de un nombre lógico en lugar de una ubicación
física. `Spring Cloud Service Discovery` también maneja el registro y la cancelación del registro de instancias de
servicio a medida que se inician y cierran. `Spring Cloud Service Discovery` se puede implementar utilizando los
siguientes servicios:

- [Consul](https://www.consul.io/)
- [Zookeeper](https://spring.io/projects/spring-cloud-zookeeper)
- [Eureka](https://github.com/Netflix/eureka), como motor de descubrimiento de servicios

**NOTA**

> Aunque `Consul` y `Zookeeper` son potentes y flexibles, la comunidad de desarrolladores de Java todavía
> utiliza `Eureka`.
> Este libro contiene ejemplos con Eureka para mantenerlo manejable y centrado en el material, y para llegar a la mayor
> audiencia posible. Si está interesado en Consul o Zookeeper, asegúrese de leer los apéndices C y D. En el apéndice C,
> agregamos un ejemplo de cómo podemos usar Consul como descubrimiento de servicios, y en el apéndice D, agregamos un
> ejemplo de cómo Utilice guardián del zoológico.

## Spring Cloud LoadBalancer and Resilience4j

Para los patrones de resiliencia del cliente de microservicios, `Spring Cloud` incluye la biblioteca `Resilience4j` y el
proyecto `Spring Cloud LoadBalancer` para que su uso dentro de sus propios microservicios sea trivial de implementar.
Encontrará la biblioteca `Resilience4j` aquí: https://github.com/resilience4j/resilience4j. Al utilizar las
bibliotecas `Resilience4j`, puede implementar rápidamente patrones de resiliencia del cliente de servicio,
como `circuit breaker`, `retry`, `bulkhead` y más.

Si bien el proyecto `Spring Cloud LoadBalancer` simplifica la integración con agentes de descubrimiento de servicios
como `Eureka`, también proporciona `equilibrio de carga` de llamadas del lado del cliente de un consumidor de servicios.
Esto hace posible que un cliente continúe realizando llamadas de servicio incluso si el agente de descubrimiento de
servicios no está disponible temporalmente.