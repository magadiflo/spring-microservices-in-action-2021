# Service Routing con Spring Cloud Gateway

Pág. 208

---

En una arquitectura distribuida como un microservicio, llegará un punto en el que necesitaremos garantizar que se
produzcan comportamientos críticos como la `security`, el `logging` y el `tracking` de los usuarios en múltiples
llamadas de servicio. Para implementar esta funcionalidad, queremos que estos atributos se apliquen de manera
consistente en todos nuestros servicios sin la necesidad de que cada equipo de desarrollo individual cree su propia
solución. Si bien es posible utilizar una librería o framework común para ayudar a crear estas capacidades directamente
en un servicio individual, hacerlo tiene estas implicaciones:

- **Es un desafío implementar estas capacidades en cada servicio de manera consistente.** Los desarrolladores se centran
  en ofrecer funcionalidad y, en el torbellino de la actividad diaria, pueden olvidarse fácilmente de implementar el
  `logging` o `tracking` de servicios a menos que trabajen en una industria regulada donde sea necesario.


- **Impulsar las responsabilidades para implementar preocupaciones transversales como el `security` y el `logging` en
  los equipos de desarrollo individuales aumenta en gran medida las probabilidades de que alguien no las implemente
  correctamente o se olvide de hacerlo.** Las preocupaciones transversales se refieren a partes o características del
  diseño del programa que son aplicables en toda la aplicación y pueden afectar otras partes de la aplicación.


- **Es posible crear una fuerte dependencia en todos nuestros servicios.** Cuantas más capacidades construyamos en un
  framework común compartido en todos nuestros servicios, más difícil será cambiar o agregar comportamiento en nuestro
  código común sin tener que volver a compilar y volver a implementar todos nuestros servicios. De repente, una
  actualización de las capacidades principales integradas en una biblioteca compartida se convierte en un largo proceso
  de migración.

Para resolver este problema, necesitamos abstraer estas preocupaciones transversales en un servicio que pueda funcionar
de forma independiente y actuar como filtro y enrutador para todas las llamadas de microservicios en nuestra
arquitectura. A este servicio lo llamamos `gateway (puerta de enlace)`. Nuestros clientes de servicios ya no llaman
directamente a un microservicio. En cambio, todas las llamadas se enrutan a través del `gateway`, que actúa como
un único punto de aplicación de políticas (PEP), y luego se enrutan a un destino final.

En este capítulo, veremos cómo utilizar `Spring Cloud Gateway` para implementar una `puerta de enlace` de servicios.
Específicamente, veremos cómo usar `Spring Cloud Gateway` para:

- Coloque todas las llamadas de servicio detrás de una única URL y asigne esas llamadas mediante el descubrimiento de
  servicios a sus instancias de servicio reales.
- Inyecte ID de correlación en cada llamada de servicio que fluye a través del gateway de servicio.
- Inyecte el ID de correlación devuelto por la respuesta HTTP y envíelo de vuelta al cliente.

Profundicemos en más detalles sobre cómo encaja una puerta de enlace de servicios en los microservicios generales que
estamos creando en este libro.

